{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jason\\\\Documents\\\\GitHub\\\\wad-api-labs-2022\\\\movies-app\\\\src\\\\pages\\\\favouriteMoviesPage.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport PageTemplate from \"../components/MovieComponents/templateMovieListPage\";\nimport { MoviesContext } from \"../contexts/moviesContext\";\nimport { useQueries } from \"react-query\";\nimport { getMovie } from \"../api/tmdb-api\";\nimport Spinner from '../components/spinner';\nimport RemoveFromFavourites from \"../components/cardIcons/removeFromFavourites\";\nimport WriteReview from \"../components/cardIcons/writeReview\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar FavouriteMoviesPage = function FavouriteMoviesPage() {\n  _s();\n\n  var _useContext = useContext(MoviesContext),\n      movieIds = _useContext.favourites; // Create an array of queries and run in parallel.\n\n\n  var favouriteMovieQueries = useQueries(movieIds.map(function (movieId) {\n    return {\n      queryKey: [\"movie\", {\n        id: movieId\n      }],\n      queryFn: getMovie\n    };\n  })); // Check if any of the parallel queries is still loading.\n\n  var isLoading = favouriteMovieQueries.find(function (m) {\n    return m.isLoading === true;\n  });\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var movies = favouriteMovieQueries.map(function (q) {\n    console.log(q.data); // console.log(ids)\n\n    console.log(q.data.genres);\n    q.data.genre_ids = q.data.genres.map(function (g) {\n      return g.id;\n    });\n    return q.data;\n  });\n\n  var toDo = function toDo() {\n    return true;\n  };\n\n  return /*#__PURE__*/_jsxDEV(PageTemplate, {\n    title: \"Favourite Movies\",\n    movies: movies,\n    action: function action(movie) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(RemoveFromFavourites, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(WriteReview, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(FavouriteMoviesPage, \"EDFEon18j7jefnBbVmrNY/DEDgY=\", false, function () {\n  return [useQueries];\n});\n\n_c = FavouriteMoviesPage;\nexport default FavouriteMoviesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"FavouriteMoviesPage\");","map":{"version":3,"names":["React","useContext","PageTemplate","MoviesContext","useQueries","getMovie","Spinner","RemoveFromFavourites","WriteReview","FavouriteMoviesPage","movieIds","favourites","favouriteMovieQueries","map","movieId","queryKey","id","queryFn","isLoading","find","m","movies","q","console","log","data","genres","genre_ids","g","toDo","movie"],"sources":["C:/Users/Jason/Documents/GitHub/wad-api-labs-2022/movies-app/src/pages/favouriteMoviesPage.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport PageTemplate from \"../components/MovieComponents/templateMovieListPage\";\nimport { MoviesContext } from \"../contexts/moviesContext\";\nimport { useQueries } from \"react-query\";\nimport { getMovie } from \"../api/tmdb-api\";\nimport Spinner from '../components/spinner';\nimport RemoveFromFavourites from \"../components/cardIcons/removeFromFavourites\";\nimport WriteReview from \"../components/cardIcons/writeReview\";\n\nconst FavouriteMoviesPage = () => {\n  const {favourites: movieIds } = useContext(MoviesContext);\n\n  // Create an array of queries and run in parallel.\n  const favouriteMovieQueries = useQueries(\n    movieIds.map((movieId) => {\n      return {\n        queryKey: [\"movie\", { id: movieId }],\n        queryFn: getMovie,\n      };\n    })\n  );\n  // Check if any of the parallel queries is still loading.\n  const isLoading = favouriteMovieQueries.find((m) => m.isLoading === true);\n\n  if (isLoading) {\n    return <Spinner />;\n  }\n\n  const movies = favouriteMovieQueries.map((q) => {\n    console.log(q.data)\n    // console.log(ids)\n    console.log(q.data.genres)\n    q.data.genre_ids = q.data.genres.map(g => g.id)\n    return q.data\n  });\n\n  const toDo = () => true;\n\n  return (\n    <PageTemplate\n      title=\"Favourite Movies\"\n      movies={movies}\n      action={(movie) => {\n        return (\n          <>\n            <RemoveFromFavourites movie={movie} />\n            <WriteReview movie={movie} />\n          </>\n        );\n      }}\n    />\n  );\n};\n\nexport default FavouriteMoviesPage;"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,YAAP,MAAyB,qDAAzB;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,oBAAP,MAAiC,8CAAjC;AACA,OAAOC,WAAP,MAAwB,qCAAxB;;;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;EAAA;;EAChC,kBAAgCR,UAAU,CAACE,aAAD,CAA1C;EAAA,IAAmBO,QAAnB,eAAOC,UAAP,CADgC,CAGhC;;;EACA,IAAMC,qBAAqB,GAAGR,UAAU,CACtCM,QAAQ,CAACG,GAAT,CAAa,UAACC,OAAD,EAAa;IACxB,OAAO;MACLC,QAAQ,EAAE,CAAC,OAAD,EAAU;QAAEC,EAAE,EAAEF;MAAN,CAAV,CADL;MAELG,OAAO,EAAEZ;IAFJ,CAAP;EAID,CALD,CADsC,CAAxC,CAJgC,CAYhC;;EACA,IAAMa,SAAS,GAAGN,qBAAqB,CAACO,IAAtB,CAA2B,UAACC,CAAD;IAAA,OAAOA,CAAC,CAACF,SAAF,KAAgB,IAAvB;EAAA,CAA3B,CAAlB;;EAEA,IAAIA,SAAJ,EAAe;IACb,oBAAO,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,SAAP;EACD;;EAED,IAAMG,MAAM,GAAGT,qBAAqB,CAACC,GAAtB,CAA0B,UAACS,CAAD,EAAO;IAC9CC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAd,EAD8C,CAE9C;;IACAF,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAF,CAAOC,MAAnB;IACAJ,CAAC,CAACG,IAAF,CAAOE,SAAP,GAAmBL,CAAC,CAACG,IAAF,CAAOC,MAAP,CAAcb,GAAd,CAAkB,UAAAe,CAAC;MAAA,OAAIA,CAAC,CAACZ,EAAN;IAAA,CAAnB,CAAnB;IACA,OAAOM,CAAC,CAACG,IAAT;EACD,CANc,CAAf;;EAQA,IAAMI,IAAI,GAAG,SAAPA,IAAO;IAAA,OAAM,IAAN;EAAA,CAAb;;EAEA,oBACE,QAAC,YAAD;IACE,KAAK,EAAC,kBADR;IAEE,MAAM,EAAER,MAFV;IAGE,MAAM,EAAE,gBAACS,KAAD,EAAW;MACjB,oBACE;QAAA,wBACE,QAAC,oBAAD;UAAsB,KAAK,EAAEA;QAA7B;UAAA;UAAA;UAAA;QAAA,SADF,eAEE,QAAC,WAAD;UAAa,KAAK,EAAEA;QAApB;UAAA;UAAA;UAAA;QAAA,SAFF;MAAA,gBADF;IAMD;EAVH;IAAA;IAAA;IAAA;EAAA,SADF;AAcD,CA3CD;;GAAMrB,mB;UAI0BL,U;;;KAJ1BK,mB;AA6CN,eAAeA,mBAAf"},"metadata":{},"sourceType":"module"}