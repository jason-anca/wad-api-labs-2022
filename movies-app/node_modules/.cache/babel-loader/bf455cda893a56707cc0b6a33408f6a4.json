{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jason\\\\Documents\\\\GitHub\\\\wad-api-labs-2022\\\\movies-app\\\\src\\\\pages\\\\upcomingMoviesPage.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PageTemplate from \"../components/MovieComponents/templateMovieListPage\";\nimport { getUpcoming } from '../api/tmdb-api';\nimport Spinner from '../components/spinner';\nimport MustWatchIcon from '../components/cardIcons/addToMustWatch';\nimport { useQuery } from 'react-query';\nimport AddToFavouritesIcon from '../components/cardIcons/addToFavourites';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar UpcomingMoviesPage = function UpcomingMoviesPage(props) {\n  _s();\n\n  var _useQuery = useQuery('upcomingMovies', getUpcoming),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError; //using the home page code here\n\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 12\n    }, _this);\n  }\n\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var movies = data.results;\n  var favourites = movies.filter(function (m) {\n    return m.favourite;\n  });\n  localStorage.setItem(\"favourites\", JSON.stringify(favourites));\n  return /*#__PURE__*/_jsxDEV(PageTemplate, {\n    title: \"Upcoming Movies\",\n    movies: movies,\n    action: function action(movie) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(MustWatchIcon, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 12\n        }, _this), /*#__PURE__*/_jsxDEV(AddToFavouritesIcon, {\n          movie: movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 12\n        }, _this)]\n      }, void 0, true);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(UpcomingMoviesPage, \"gRWcc9Q6k3CVvKOllxZBlhahD78=\", false, function () {\n  return [useQuery];\n});\n\n_c = UpcomingMoviesPage;\nexport default UpcomingMoviesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpcomingMoviesPage\");","map":{"version":3,"names":["React","useState","useEffect","PageTemplate","getUpcoming","Spinner","MustWatchIcon","useQuery","AddToFavouritesIcon","UpcomingMoviesPage","props","data","error","isLoading","isError","message","movies","results","favourites","filter","m","favourite","localStorage","setItem","JSON","stringify","movie"],"sources":["C:/Users/Jason/Documents/GitHub/wad-api-labs-2022/movies-app/src/pages/upcomingMoviesPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PageTemplate from \"../components/MovieComponents/templateMovieListPage\";\nimport {getUpcoming} from '../api/tmdb-api';\nimport Spinner from '../components/spinner';\nimport MustWatchIcon from '../components/cardIcons/addToMustWatch'\nimport { useQuery } from 'react-query';\nimport AddToFavouritesIcon from '../components/cardIcons/addToFavourites'\n\nconst UpcomingMoviesPage = (props) => {\n  const {  data, error, isLoading, isError }  = useQuery('upcomingMovies', getUpcoming)\n\n  //using the home page code here\n  if (isLoading) {\n    return <Spinner />\n  }\n\n  if (isError) {\n    return <h1>{error.message}</h1>\n  }  \n  const movies = data.results;\n\n  const favourites = movies.filter((m) => m.favourite);\n  localStorage.setItem(\"favourites\", JSON.stringify(favourites));\n\n    return(\n        <PageTemplate \n        title=\"Upcoming Movies\"\n        movies={movies} \n        action={(movie) => {\n          return (\n          <>\n           <MustWatchIcon movie={movie} />\n           <AddToFavouritesIcon movie={movie} />\n          </>\n          );\n        }}\n        />\n    )\n}\n\nexport default UpcomingMoviesPage;"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,qDAAzB;AACA,SAAQC,WAAR,QAA0B,iBAA1B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,aAAP,MAA0B,wCAA1B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,mBAAP,MAAgC,yCAAhC;;;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;EAAA;;EACpC,gBAA8CH,QAAQ,CAAC,gBAAD,EAAmBH,WAAnB,CAAtD;EAAA,IAASO,IAAT,aAASA,IAAT;EAAA,IAAeC,KAAf,aAAeA,KAAf;EAAA,IAAsBC,SAAtB,aAAsBA,SAAtB;EAAA,IAAiCC,OAAjC,aAAiCA,OAAjC,CADoC,CAGpC;;;EACA,IAAID,SAAJ,EAAe;IACb,oBAAO,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,SAAP;EACD;;EAED,IAAIC,OAAJ,EAAa;IACX,oBAAO;MAAA,UAAKF,KAAK,CAACG;IAAX;MAAA;MAAA;MAAA;IAAA,SAAP;EACD;;EACD,IAAMC,MAAM,GAAGL,IAAI,CAACM,OAApB;EAEA,IAAMC,UAAU,GAAGF,MAAM,CAACG,MAAP,CAAc,UAACC,CAAD;IAAA,OAAOA,CAAC,CAACC,SAAT;EAAA,CAAd,CAAnB;EACAC,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCC,IAAI,CAACC,SAAL,CAAeP,UAAf,CAAnC;EAEE,oBACI,QAAC,YAAD;IACA,KAAK,EAAC,iBADN;IAEA,MAAM,EAAEF,MAFR;IAGA,MAAM,EAAE,gBAACU,KAAD,EAAW;MACjB,oBACA;QAAA,wBACC,QAAC,aAAD;UAAe,KAAK,EAAEA;QAAtB;UAAA;UAAA;UAAA;QAAA,SADD,eAEC,QAAC,mBAAD;UAAqB,KAAK,EAAEA;QAA5B;UAAA;UAAA;UAAA;QAAA,SAFD;MAAA,gBADA;IAMD;EAVD;IAAA;IAAA;IAAA;EAAA,SADJ;AAcH,CA9BD;;GAAMjB,kB;UAC0CF,Q;;;KAD1CE,kB;AAgCN,eAAeA,kBAAf"},"metadata":{},"sourceType":"module"}