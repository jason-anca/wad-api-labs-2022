{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jason\\\\Documents\\\\GitHub\\\\wad-api-labs-2022\\\\movies-app\\\\src\\\\pages\\\\homePage.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { getMovies } from \"../api/tmdb-api\";\nimport PageTemplate from '../components/MovieComponents/templateMovieListPage';\nimport { useQuery } from 'react-query';\nimport Spinner from '../components/spinner';\nimport AddToFavouritesIcon from '../components/cardIcons/addToFavourites';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar HomePage = function HomePage(props) {\n  _s();\n\n  var _useQuery = useQuery('discover', getMovies),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError;\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 12\n    }, _this);\n  }\n\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var movies = data.results; // Redundant, but necessary to avoid app crashing.\n\n  var favourites = movies.filter(function (m) {\n    return m.favourite;\n  });\n  localStorage.setItem('favourites', JSON.stringify(favourites));\n\n  var addToFavourites = function addToFavourites(movieId) {\n    return true;\n  };\n\n  return /*#__PURE__*/_jsxDEV(PageTemplate, {\n    title: \"Discover Movies\",\n    movies: movies,\n    action: function action(movie) {\n      return /*#__PURE__*/_jsxDEV(AddToFavouritesIcon, {\n        movie: movie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 16\n      }, _this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(HomePage, \"gRWcc9Q6k3CVvKOllxZBlhahD78=\", false, function () {\n  return [useQuery];\n});\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","getMovies","PageTemplate","useQuery","Spinner","AddToFavouritesIcon","HomePage","props","data","error","isLoading","isError","message","movies","results","favourites","filter","m","favourite","localStorage","setItem","JSON","stringify","addToFavourites","movieId","movie"],"sources":["C:/Users/Jason/Documents/GitHub/wad-api-labs-2022/movies-app/src/pages/homePage.js"],"sourcesContent":["import React from \"react\";\nimport { getMovies } from \"../api/tmdb-api\";\nimport PageTemplate from '../components/MovieComponents/templateMovieListPage';\nimport { useQuery } from 'react-query';\nimport Spinner from '../components/spinner';\nimport AddToFavouritesIcon from '../components/cardIcons/addToFavourites'\n\nconst HomePage = (props) => {\n\n  const {  data, error, isLoading, isError }  = useQuery('discover', getMovies)\n\n  if (isLoading) {\n    return <Spinner />\n  }\n\n  if (isError) {\n    return <h1>{error.message}</h1>\n  }  \n  const movies = data.results;\n\n  // Redundant, but necessary to avoid app crashing.\n  const favourites = movies.filter(m => m.favourite)\n  localStorage.setItem('favourites', JSON.stringify(favourites))\n  const addToFavourites = (movieId) => true \n\n  return (\n    <PageTemplate\n      title=\"Discover Movies\"\n      movies={movies}\n      action={(movie) => {\n        return <AddToFavouritesIcon movie={movie} />\n      }}\n    />\n);\n};\n\nexport default HomePage;"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,OAAOC,YAAP,MAAyB,qDAAzB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,mBAAP,MAAgC,yCAAhC;;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;EAAA;;EAE1B,gBAA8CJ,QAAQ,CAAC,UAAD,EAAaF,SAAb,CAAtD;EAAA,IAASO,IAAT,aAASA,IAAT;EAAA,IAAeC,KAAf,aAAeA,KAAf;EAAA,IAAsBC,SAAtB,aAAsBA,SAAtB;EAAA,IAAiCC,OAAjC,aAAiCA,OAAjC;;EAEA,IAAID,SAAJ,EAAe;IACb,oBAAO,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,SAAP;EACD;;EAED,IAAIC,OAAJ,EAAa;IACX,oBAAO;MAAA,UAAKF,KAAK,CAACG;IAAX;MAAA;MAAA;MAAA;IAAA,SAAP;EACD;;EACD,IAAMC,MAAM,GAAGL,IAAI,CAACM,OAApB,CAX0B,CAa1B;;EACA,IAAMC,UAAU,GAAGF,MAAM,CAACG,MAAP,CAAc,UAAAC,CAAC;IAAA,OAAIA,CAAC,CAACC,SAAN;EAAA,CAAf,CAAnB;EACAC,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCC,IAAI,CAACC,SAAL,CAAeP,UAAf,CAAnC;;EACA,IAAMQ,eAAe,GAAG,SAAlBA,eAAkB,CAACC,OAAD;IAAA,OAAa,IAAb;EAAA,CAAxB;;EAEA,oBACE,QAAC,YAAD;IACE,KAAK,EAAC,iBADR;IAEE,MAAM,EAAEX,MAFV;IAGE,MAAM,EAAE,gBAACY,KAAD,EAAW;MACjB,oBAAO,QAAC,mBAAD;QAAqB,KAAK,EAAEA;MAA5B;QAAA;QAAA;QAAA;MAAA,SAAP;IACD;EALH;IAAA;IAAA;IAAA;EAAA,SADF;AASD,CA3BD;;GAAMnB,Q;UAE0CH,Q;;;KAF1CG,Q;AA6BN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}